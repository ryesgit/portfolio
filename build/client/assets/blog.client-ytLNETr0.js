import{q as p,c as i,d as a,w as b,g,T as s,e as y,f as D,h as l,u,i as m,j as w}from"./firebase.client-BqOXwYna.js";const n="blogPosts",d="settings",h=e=>{const t=e.data();return{id:e.id,title:t.title,excerpt:t.excerpt,content:t.content,publishDate:t.publishDate.toDate().toISOString().split("T")[0],category:t.category,tags:Array.isArray(t.tags)?t.tags:[],slug:t.slug,readTime:t.readTime,published:t.published||!1}},E=async()=>{try{const e=p(i(a,n),b("published","==",!0)),t=await g(e),r=[];return t.forEach(o=>{r.push(h(o))}),r.sort((o,c)=>new Date(c.publishDate).getTime()-new Date(o.publishDate).getTime()),r}catch(e){return console.error("Error fetching blog posts:",e),[]}},T=async()=>{try{const e=await g(i(a,n)),t=[];return e.forEach(r=>{t.push(h(r))}),t.sort((r,o)=>{const c=new Date(r.publishDate).getTime();return new Date(o.publishDate).getTime()-c}),t}catch(e){return console.error("Error fetching all blog posts:",e),[]}},B=async e=>{try{const t=s.now();return(await y(i(a,n),{...e,publishDate:s.fromDate(new Date(e.publishDate)),tags:Array.isArray(e.tags)?e.tags:e.tags.split(",").map(o=>o.trim()),published:e.published||!1,createdAt:t,updatedAt:t})).id}catch(t){throw console.error("Error creating blog post:",t),t}},R=async(e,t)=>{try{const r=l(a,n,e),o={...t,updatedAt:s.now()};return t.publishDate&&(o.publishDate=s.fromDate(new Date(t.publishDate))),t.tags&&(o.tags=Array.isArray(t.tags)?t.tags:t.tags.split(",").map(c=>c.trim())),await u(r,o),!0}catch(r){throw console.error("Error updating blog post:",r),r}},P=async e=>{try{return await D(l(a,n,e)),!0}catch(t){throw console.error("Error deleting blog post:",t),t}},S=async(e,t)=>{try{const r=l(a,n,e);return await u(r,{published:t,updatedAt:s.now()}),!0}catch(r){throw console.error("Error toggling publish status:",r),r}},v=async()=>{try{const e=l(a,"meta",d),t=await m(e);return t.exists()?t.data():{blogTitle:"Chug Blogs",blogDescription:"A modern blog powered by React Router and Firebase",blogKeywords:"blog, tech, programming, development",authorName:"Lee Ryan Soliman",siteUrl:"https://blog.leeryan.dev",ogImage:"https://blog.leeryan.dev/og-image.jpg",twitterHandle:"@leeryansoliman",googleAnalyticsId:"",favicon:"/favicon.ico",themeColor:"#dc2626"}}catch(e){return console.error("Error fetching blog meta:",e),null}},q=async e=>{try{const t=l(a,"meta",d);return await w(t,{...e,updatedAt:s.now()}),!0}catch(t){throw console.error("Error updating blog meta:",t),t}};export{B as createBlogPost,P as deleteBlogPost,T as getAllBlogPosts,v as getBlogMeta,E as getBlogPosts,S as togglePublishStatus,q as updateBlogMeta,R as updateBlogPost};
